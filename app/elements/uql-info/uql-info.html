<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/core-ajax/core-ajax.html">
<link rel="import" href="/bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="/bower_components/paper-tabs/paper-tab.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/core-header-panel/core-header-panel.html">
<link rel="import" href="/bower_components/core-toolbar/core-toolbar.html">
<link rel="import" href="/bower_components/core-icons/core-icons.html">



<polymer-element name="uql-info" attributes="holds loans fines" layout center>
  <template>

    <style>
      :host {
        border: 1px solid #F1F1F1;
        display: block;
        padding: 0px;
        max-width: 350px;
        height: 350px;
      }

      div.infoWrapper {
        padding: 10px;

      }

      core-header-panel {
        height: 100%;
        overflow: auto;
        -webkit-overflow-scrolling: touch;
        background: #E5E5E5;
      }
      core-toolbar {
        background: #03a9f4;
        color: white;

      }

      paper-tabs::shadow #selectionBar {
        background: red;
        border: 1px solid red;
      }

      paper-tabs {
        background: #03a9f4;
      }

      #overviewList li{
        height: 50px;

      }

      #tabs {
        width: 100%;
        margin: 0;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        text-transform: uppercase;
      }

    </style>
    <core-header-panel>
      <core-toolbar>
        <paper-tabs id="tabs" selected="{{ selectedTab }}" on-core-select="{{ tabSelected }}">
          <paper-tab name="overview" id="overview">Overview</paper-tab>
          <paper-tab name="holds" id="holds">Holds</paper-tab>
          <paper-tab name="loans" id="loans">Loans</paper-tab>
          <paper-tab name="fines" id="fines">Fines</paper-tab>
        </paper-tabs>
      </core-toolbar>

      <div class="infoWrapper">
        <div hidden?="{{ selectedTab != 'overview' }}">

        <ul id="overviewList">
          <li>
            <div>
              You have <a href="#holds" onclick="switchTab('holds')">{{ holds }} holds</a>.
            </div>
          </li>
          <li>
            <div>
              Your fines are: {{ fines | moneyFormat }}
            </div>
          </li>
          <li>
            <div>
              You have {{ loans }} loans.
            </div>
          </li>
        </ul>



      </div>

      <div class="holds" hidden?="{{ selectedTab != 'holds' }}">
      You have {{ holds }} holds.
      </div>
      <div class="fines" hidden?="{{ selectedTab != 'fines' }}">
      Your fines are: {{ fines | moneyFormat }}
      </div>

      <div class="loans" hidden?="{{ selectedTab != 'loans' }}">
      You have {{ loans }} loans.
      </div>
      </div>

      <core-ajax auto url="../../mock/info.json"
                 params=''
                 id="ajax"
                 handleAs="json" on-core-response="{{ infoLoaded }}"></core-ajax>

    </core-header-panel>
  </template>

  <script>
    Polymer('uql-info', {

      selectedTab : 'overview',

      infoLoaded : function() {
        var response = this.$.ajax.response;
        this.holds = response.holds;
        this.loans = response.loans;
        this.fines = response.fines;
      },

      tabSelected : function() {
        this.selectedTab = this.$.tabs.selected;
      },

      moneyFormat: function(value) {
        return '$' + parseFloat(value).toFixed(2);
      }

    });

  </script>

</polymer-element>